<source>
  @type forward
  port 24224
  bind 0.0.0.0
</source>

<source>
  @type http_healthcheck
  bind 0.0.0.0
  port 8888
</source>

<filter **>
  @type stdout
</filter>

<match **>
  @type opensearch
  @id output_opensearch
  @log_level info

  hosts opensearch:9200
  path_prefix /
  suppress_type_name true
  
  <buffer tag,time>
    @type file
    path /fluentd/log/opensearch.log.buffer
    timekey 3600
    timekey_wait 10m
    chunk_limit_size "{{ chunking_buffer_limit_size | default: 5M }}"
  </buffer>

  <secondary>
    @type stdout
  </secondary>
</match>
