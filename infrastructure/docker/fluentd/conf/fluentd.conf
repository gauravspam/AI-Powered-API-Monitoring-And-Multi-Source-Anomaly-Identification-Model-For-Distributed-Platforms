<label @FLUENT_LOG>
  <match fluent.**>
    @type null
  </match>
</label>

<source>
  @type http
  port 9880
  bind "0.0.0.0"
</source>

<match api-logs.**>
  @type opensearch
  host "localhost"
  port 9200
  scheme http
  logstash_format true
  logstash_prefix "api-logs"
  <buffer>
    @type file
    path /var/log/fluentd-buffer/opensearch
    flush_interval 5s
    flush_thread_count 2
    retry_max_interval 30s
  </buffer>
</match>

<match **>
  @type stdout
</match>
